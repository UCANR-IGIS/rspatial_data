---
title: "Geoprocessing"
output: html_notebook
---

# About this R Notebook

R Notebooks are a 'flavor' of R markdown that combine plain text with R commands in code chunks. You can (and should!) edit them, and save it every few minutes like anything else!

If you're in RStudio, just go ahead and *minimize the console window*. You won't need it, because when you run the R commands the *output appears below the code chunk*.

Keyboard shortcuts:

- run the current line of R: *ctrl + enter*

 - run everything in the current code chunk: *ctrl + shift + enter*

 - insert a new code chunk: *ctrl + alt + i*

# Setup

First, load the libraries for this exercise.

```{r setup}
library(sf)
```


Next, check the working directory used by the notebook. It should default to the location of the Rmd file (which in our case should be the parent folder of the 'data' folder).

```{r}
getwd()
```
# Compute the area of Yosemite

First we should import the boundary and project it to UTM.

```{r}
## Define a convenience variable for UTM Zone 11
epsg_utm11n_nad83 <- 26911

## Import the YNP border
yose_bnd_utm <- st_read(dsn="./data", layer="yose_boundary") %>% 
  st_transform(epsg_utm11n_nad83)
```
Find the of the park boundary:

```{r}
## Compute the area of the park
yose_area <- yose_bnd_utm %>% st_area()
yose_area
```
Display the units in square-miles:


```{r}
library(units)

## View in hectacres
set_units(yose_area, ha)

## View in square miles
set_units(yose_area, mi^2)
```
CHALLENGE QUESTION

Import the burned area layer from historical fires (code provided below). Then compute the area of each fire. Which was the biggest fire?

```{r}
firehist_gdb <- "./data/yose_firehistory.gdb"
file.exists(firehist_gdb)

## View the layers in this source
st_layers(firehist_gdb)

## Import the 'Fire History Polys' layer  (case sensitive!)
yose_firepolys_utm <- st_read(firehist_gdb, layer="YNP_FireHistoryPolys")
```

Solution: see https://ucanr-igis.github.io/rspatial_scgis20/slides/geoprocessing.html


Congratulations on finishing the Notebook. Save it (again) 
